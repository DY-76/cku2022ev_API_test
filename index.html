<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <title>cku2022ev</title>
    <script>
        function Request(){
            var serviceKey = 'Zxc%2BL1BY7vTH4mkcjzGShFsue5yUAk2q55yjb3nUf7EeeXcsQTv9nE7qIjVN2oU01PuQMJ%2BiHQGuo2fa2ZlJlw%3D%3D'
            var page_value = document.getElementById('page').value;
            var perPage_value = document.getElementById('perPage').value;
            var returnType_value = document.getElementById('returnType').value;
            var addr_value = document.getElementById('addr').value;

            var xhr = new XMLHttpRequest();
            var url = 'https://api.odcloud.kr/api/EvInfoServiceV2/v1/getEvSearchList'; /*URL*/
            var queryParams = '?' + encodeURIComponent('page') + '='+ encodeURIComponent(page_value); /*페이지*/
            queryParams += '&' + encodeURIComponent('perPage') + '=' + encodeURIComponent(perPage_value); /*페이지당 데이터 수*/
            queryParams += '&' + encodeURIComponent('returnType') + '=' + encodeURIComponent('JSON'); /*응답 확장자*/
            queryParams += '&' + encodeURIComponent('cond[addr::LIKE]') + '=' + encodeURIComponent(addr_value); /*주소*/
            queryParams += '&' + encodeURIComponent('serviceKey') + '=' + serviceKey; /*Service Key*/
            xhr.open('GET', url + queryParams); /*Get 방식으로 API 호출*/
            xhr.onreadystatechange = function () {
                if (this.readyState == 4) {
                    /*알림창 제공*/
                    alert('Status: '+this.status+'nHeaders: '+JSON.stringify(this.getAllResponseHeaders())+'nBody: '+this.responseText);
                }
            };
            xhr.send('');
        }
    </script>
</head>
<body>
테스트 페이지
<br>
<br><input type="number" name="page" min="1" max="99" id="page"><span class="up">페이지</span>
<br><input type="number" name="perPage" min="1" max="99" id="perPage"><span class="up">페이지당 표시 자료 수</span>

<br><input type="radio" name="type"><span class="up">응답타입 : XML</span>
    <input type="radio" name="type"><span class="up">응답타입 : JSON</span>

<br><input type="text" name="addr" id="addr"><span class="up">주소</span>

<br>
<br><button onclick="Request()">API 호출</button>

</body>
<nHeaders></nHeaders>
<nBody></nBody>
</html>